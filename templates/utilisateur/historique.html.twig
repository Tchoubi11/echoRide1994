{% extends 'base.html.twig' %}

{% block body %}

<h2>Mes covoiturages en tant que conducteur</h2>

{% if covoiturages is not empty %}
    {% for covoiturage in covoiturages %}
        <div class="card p-3 mb-2">
            <strong>{{ covoiturage.lieuDepart }} ‚Üí {{ covoiturage.lieuArrivee }}</strong><br>
            D√©part : {{ covoiturage.dateDepart|date('d/m/Y H:i') }}<br>

            {% if covoiturage.isCancelled %}
                <span class="badge bg-danger mt-2">Ce covoiturage a √©t√© annul√©</span>
            {% else %}
                <form method="post" action="{{ path('annuler_covoiturage', { id: covoiturage.id }) }}" 
                      onsubmit="return confirm('√ätes-vous s√ªr(e) de vouloir annuler ce covoiturage ?');">
                    <button class="btn btn-danger btn-sm mt-2" type="submit">Annuler le trajet</button>
                </form>
            {% endif %}
        </div>
    {% endfor %}
{% else %}
    <p>Aucun covoiturage en tant que conducteur.</p>
{% endif %}

<hr>

<h2>Mes covoiturages en tant que passager</h2>
{% if reservations is not empty %}
    {% for res in reservations %}
        <div class="card p-3 mb-2">
            <strong>{{ res.covoiturage.lieuDepart }} ‚Üí {{ res.covoiturage.lieuArrivee }}</strong><br>
            D√©part : {{ res.covoiturage.dateDepart|date('d/m/Y H:i') }}<br>

            {% if res.covoiturage.isCancelled == false %}
                <form method="post" action="{{ path('annuler_covoiturage', { id: res.covoiturage.id }) }}"
                      onsubmit="return confirm('Annuler votre participation ?');" style="display: inline;">
                    <button type="submit" class="btn btn-warning btn-sm mt-2">Annuler ma participation</button>
                </form>
            {% else %}
                <span class="badge bg-danger mt-2">Trajet annul√©</span>
            {% endif %}

        </div>
    {% endfor %}
{% else %}
    <p>Aucun covoiturage r√©serv√©.</p>
{% endif %}

<div class="d-flex justify-content-center gap-3 mt-4 flex-wrap">
    <a href="{{ path('user_profile') }}" class="btn btn-secondary">üë§ Retour sur mon profil</a>
    <a href="{{ path('app_home') }}" class="btn btn-primary">‚¨Ö Retour √† l'accueil</a>
</div>

{% endblock %}
