{% extends 'base.html.twig' %} 

{% block body %}
    <div class="container mt-5">
        <h2>D√©tails du covoiturage</h2>

        <div class="card p-3 shadow-sm">
            <p><strong>Pseudo du chauffeur :</strong> {{ ride.driver.pseudo }}</p>
            <p><strong>Note :</strong> {{ ride.driver.rating }}</p>
            
            <p><strong>Lieu de d√©part :</strong> {{ ride.getLieuDepart() }}</p>
            <p><strong>Lieu d'arriv√©e :</strong> {{ ride.getLieuArrivee() }}</p>
            <p><strong>Prix :</strong> {{ ride.getPrixPersonne() }} ‚Ç¨</p>

            <p><strong>Date et Heure de d√©part :</strong> 
                {{ ride.getDateDepart() | date('d/m/Y') }} √† {{ ride.getHeureDepart() | date('H:i') }}
            </p>

            <p><strong>Date et Heure d'arriv√©e :</strong> 
                {{ ride.getDateArrivee() | date('d/m/Y') }} √† {{ ride.getHeureArrivee() | date('H:i') }}
            </p>

            <p><strong>Voyage √©cologique :</strong> {{ ride.getIsEco() ? 'Oui' : 'Non' }}</p>
        </div>

        <h3 class="mt-4">Passagers :</h3>
        <ul class="list-group" id="reservations-list">
            {% for reservation in ride.getReservations() %}
                <li class="list-group-item d-flex justify-content-between align-items-center" id="reservation-{{ reservation.id }}">
                    {{ reservation.getPassenger().getPseudo() }} ({{ reservation.getStatut() }})
                    {% if reservation.getPassenger() == app.user %}
                        <button class="btn btn-danger btn-sm cancel-reservation" data-id="{{ reservation.id }}">
                            Annuler
                        </button>
                    {% endif %}
                </li>
            {% else %}
                <p>Aucun passager pour le moment.</p>
            {% endfor %}
        </ul>
        

        {% if ride.getPlacesRestantes() > 0 %}
            <a href="{{ path('reservation_book', {'id': ride.id}) }}" class="btn btn-success mt-3">R√©server</a>
        {% else %}
            <p class="mt-3 text-danger">Plus de places disponibles.</p>
        {% endif %}

        {% if ride.getPassengers().contains(app.user) %}
            <a href="{{ path('covoiturage_cancel', {'id': ride.id}) }}" class="btn btn-warning mt-3">Annuler ma r√©servation</a>
        {% endif %}

        <div class="mt-4">
            <a href="{{ path('search_route') }}" class="btn btn-primary">üîç Retour √† la recherche</a>
            <a href="{{ path('app_home') }}" class="btn btn-secondary">üè† Retour √† l'accueil</a>
        </div>
    </div>
    {% block javascripts %}
    {{ parent() }} 
{% endblock %}

{% endblock %}
